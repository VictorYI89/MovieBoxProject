<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="notice">
	<select id="selectAll" parameterType="hashmap" resultType="NoticeDTO">
		select row_number() over (order by idx) as row_num,idx,name,category,title,regdate from notice where
		 <choose>
		 	<when test="type=='megabox'">name='메가박스'</when>
		 	<when test="type=='other'">name !='메가박스'</when>
		 	<otherwise>1=1</otherwise>
		 </choose>
		 <if test="title!='' and title!=null">and title like concat('%',#{title},'%')</if>  
		 order by idx desc limit #{startNo},#{size}
	</select>
	
	<select id="selectCount" parameterType="hashmap" resultType="int">
		select count(*) from notice  where 
		<choose>
		 	<when test="type=='megabox'">name='메가박스'</when>
		 	<when test="type=='other'">name !='메가박스'</when>
		 	<otherwise>1=1</otherwise>
		 </choose> 
		 <if test="title!='' and title!=null">and title like concat('%',#{title},'%')</if>
	</select>
	
	<select id="selectByIdx" parameterType="int" resultType="NoticeDTO">
		select * from notice where idx=#{idx}
	</select>
	
	<select id="selectPrevAndNext" parameterType="hashmap" resultType="NoticeDTO">
		select * from notice where <if test="type=='plus'">idx=#{idx}+1</if>
		<if test="type=='minus'">idx=#{idx}-1</if>
	</select>
</mapper>





<div class="title">강남</div>
		        <div class="theater-box">
		            <div class="theater-type">
		                <div class="theater-name">1관</div> 
		                <div class="chair">총 232석</div>
		            </div>
		            <div class="theater-area">
		                <div class="item">
		                    2D(자막)
		                </div>
		                <div class="item">
		                    <div class="item-wrapper">
		                        <div>15:00~17:00</div>
		                        <div>3회차</div>
		                    </div>
		                    <div class="item-box">
		                        <div class="start-time">15:00</div>
		                        <div class="remain-chair">220석</div>
		                    </div>
		                </div> 
		                <div class="item">
		                    <div class="start-time">17:35</div>
		                    <div class="remain-chair">220석</div>
		                </div> 
		                <div class="item">
		                    <div class="start-time">20:10</div>
		                    <div class="remain-chair">220석</div>
		                </div> 
		            </div>
		        </div>




<div class="main-item">
    <div class="main-img">
        <img src="https://img.megabox.co.kr/SharedImg/2024/07/04/yKz9lWmAB90In1nFsSBsNXaPVOAoWgha_420.jpg" alt="">
        <div class="movie_hidden">
            <div class="text"></div>
            <div class="sub-text"></div>
            <div class="rate">관람평</div>
        </div>
    </div>
    <div class="movie_button">
        <button type="button" class="btn btn-dark movie_like"><img src="${pageContext.request.contextPath }/static/images/favorite.svg" alt="">692</button>
        <button class="movie_reserve btn2 ">예매</button>
    </div>
</div>